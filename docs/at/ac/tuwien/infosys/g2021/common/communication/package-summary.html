<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_20) on Sun Jan 04 14:05:33 CET 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>at.ac.tuwien.infosys.g2021.common.communication</title>
<meta name="date" content="2015-01-04">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="at.ac.tuwien.infosys.g2021.common.communication";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/util/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?at/ac/tuwien/infosys/g2021/common/communication/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;at.ac.tuwien.infosys.g2021.common.communication</h1>
<div class="docSummary">
<div class="block">This package implements the communication between the buffer daemon and the GBot
 interfaces.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/ValueChangeObserver.html" title="interface in at.ac.tuwien.infosys.g2021.common.communication">ValueChangeObserver</a></td>
<td class="colLast">
<div class="block">Objects implementing this interface can be notified about spontaneous value
 changes of buffers.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/ClientEndpoint.html" title="class in at.ac.tuwien.infosys.g2021.common.communication">ClientEndpoint</a></td>
<td class="colLast">
<div class="block">This is the connection endpoint at a JVM containing GBots with its DataPoint instances.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/DaemonEndpoint.html" title="class in at.ac.tuwien.infosys.g2021.common.communication">DaemonEndpoint</a></td>
<td class="colLast">
<div class="block">Created by dag on 27.12.2014.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/ProtocolException.html" title="class in at.ac.tuwien.infosys.g2021.common.communication">ProtocolException</a></td>
<td class="colLast">
<div class="block">This exception signals a communication protocol error.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package at.ac.tuwien.infosys.g2021.common.communication Description">Package at.ac.tuwien.infosys.g2021.common.communication Description</h2>
<div class="block">This package implements the communication between the buffer daemon and the GBot
 interfaces. As transport mechanism TCP/IP is used. A server socket in the
 buffer daemon listens for new connections. Every JVM containing GBots with
 DataPoints establish one single connection to the server socket in the buffer daemon.
 As server address and port "localhost:3449" is assumed. This defaults can be
 overridden with the system properties "<tt>at.ac.tuwien.infosys.g2021.daemon.address</tt>"
 and  "<tt>at.ac.tuwien.infosys.g2021.daemon.port</tt>".
 <p>

 <h3>Object Model</h3>

 At the client side, there is a singleton object called <tt><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/ClientEndpoint.html" title="class in at.ac.tuwien.infosys.g2021.common.communication"><code>ClientEndpoint</code></a></tt> within every
 JVM containing GBots. This singleton instance is created during the instantiation of the first <tt>DataPoint</tt> object.
 The <tt>ClientEndpoint</tt> maintains one TCP/IP connection to the buffer daemon as long as minimal one <tt>DataPoint</tt> exists.
 <p>
 At the TCP/IP server side within the daemon, a <tt><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/communication/DaemonEndpoint.html" title="class in at.ac.tuwien.infosys.g2021.common.communication"><code>DaemonEndpoint</code></a></tt>
 object receives all messages from all <tt>ClientEndpoint</tt>s. It interprets the received messages, do the necessary labour
 and sends the result as another message back to the <tt>ClientEndpoint</tt>. For every TCP/IP client connection there exists
 a separate thread within the daemon. At the client side the calling thread is suspended until the answer from the daemon is
 received. If there is no answer from the daemon within 2 seconds the <tt>ClientEndpoint</tt> assumes, that the daemon has died.
 It closes the connection to the daemon and changes to the <tt>DISCONNECTED</tt> state.
 <p>


 <h3>Protocol</h3>

 Due to simpler debugging, all messages are sent as XMLs as defined in the schema
 "<tt>communication.xsd</tt>". All messages are sent on a permanent open TCP/IP stream. Therefore
 the XML messages are separated by a separator string ("<tt>\r\n&lt;&gt;\r\n</tt>").
 <p>
 All XML messages are packed into a &lt;message&gt; tag as an envelope. Due to readability reasons, this envelope tag
 is not show in the following scenarios.

 <h4>Establishing a Connection</h4>

 The following scenario shows the messages of a successfully connection to the daemon.
 <pre>
     GBot                                    daemon
       |
       |--------------------------------------&gt; Establishing the TCP/IP connection
       |                                       |
       |&lt;establish&gt;                            |
       |--------------------------------------&gt;| The daemon checks the client protocol version.
       |                                       |
       |                                       | The version is ok, the daemon accepts the
       |                          &lt;accepted&gt;   | connection.
       |&lt;--------------------------------------|
       |                                       |
       |                                       |
       |                                       | Now the connection can be used.
 </pre>

 If client and daemon uses a different protocol, the client cannot connect to the daemon.

 <pre>
     GBot                                    daemon
       |
       |--------------------------------------&gt; Establishing the TCP/IP connection
       |                                       |
       |&lt;establish&gt;                            |
       |--------------------------------------&gt;| The daemon checks the client protocol version.
       |                                       |
       |                          &lt;rejected&gt;   | Its a wrong version.
       |&lt;--------------------------------------|
       |                                       | The daemon closes the connection.
       |The client closes the connection too.
 </pre>

 <h4>Closing a Connection</h4>

 Client or daemon can close the connection at any time sending a &lt;disconnect&gt; message. After sending or
 receiving this message, the socket is closed immediately. The client <tt>DataPoint</tt>s changes to the
 <tt>DISCONNECTED</tt> state.

 <h4>Querying Buffer Names and Meta Information</h4>

 <pre>
     GBot                                    daemon
       |                                       |
       |                                       |
       |&lt;queryBuffers&gt;                         |
       |--------------------------------------&gt;| Here the daemon looks for matching buffers
       |                                       | and answers with a list of buffer names.
       |                       &lt;bufferNames&gt;   |
       |&lt;--------------------------------------|
       |                                       |
       |                                       |
       |                                       |
       |&lt;queryMetaInfo&gt;                        |
       |--------------------------------------&gt;| Now the GBot wants to read all the meta info
       |                                       | of a buffer. The daemon sends a list of meta info
       |                                       | assigned to the buffer.
       |                    &lt;bufferMetaInfo&gt;   |
       |&lt;--------------------------------------|
       |                                       |
       |                                       |
       |                                       |
       |&lt;queryMetaInfo&gt;                        |
       |--------------------------------------&gt;| Reading the meta info of an unknown buffer
       |                                       | causes a rejection.
       |                          &lt;rejected&gt;   |
       |&lt;--------------------------------------|
       |                                       |
</pre>

 <h4>Reading Buffer State and Value</h4>

 <pre>
     GBot                                    daemon
       |                                       |
       |                                       |
       |&lt;getImmediate&gt;                         |
       |--------------------------------------&gt;| This is a client request for reading buffer info immediately.
       |                                       | The daemon answers as requested.
       |                              &lt;push&gt;   |
       |&lt;--------------------------------------|
       |                                       |
       |                                       |
       |                                       |
       |&lt;get&gt;                                  |
       |--------------------------------------&gt;| Now the GBot knows the current buffer info. New buffer info
       |                                       | is necessary, if the buffer value or state changes. The daemon
       |                                       | sends no answer! If there is no such buffer known by the daemon,
       |                                       | this message is ignored at all.
       |                                       |
       |                                       | ...
       |                                       |
       |                                       | Here the buffer value changes. The daemon sends the updated
       |                              &lt;push&gt;   | buffer info to the client.
       |&lt;--------------------------------------|
       |                                       |
       |                                       | Another change of the buffer information! The daemon does
       |                                       | nothing. There was no &lt;get&gt; message received.
       |                                       |
       |&lt;getImmediate&gt;                         |
       |--------------------------------------&gt;| At last the GBot wants to know buffer info about an
       |                                       | unknown buffer. The daemon rejects this request.
       |                          &lt;rejected&gt;   |
       |&lt;--------------------------------------|
       |                                       |
</pre>

 <h4>Setting the Buffer Value</h4>

 <pre>
     GBot                                    daemon
       |                                       |
       |&lt;set&gt;                                  | The GBot changes a buffer value.
       |--------------------------------------&gt;| If this is a well known buffer, the daemon sets the
       |                              &lt;push&gt;   | hardware ports as requested and pushes the new
       |&lt;--------------------------------------| port info.
       |                                       |
       |                                       |
       |&lt;set&gt;                                  |
       |--------------------------------------&gt;| At last the GBot sets the value of an unknown buffer.
       |                                       | The daemon rejects this message immediately.
       |                          &lt;rejected&gt;   |
       |&lt;--------------------------------------|
       |                                       |
</pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../at/ac/tuwien/infosys/g2021/common/util/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?at/ac/tuwien/infosys/g2021/common/communication/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
